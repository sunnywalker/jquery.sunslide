!function($,e){$.fn.sunslide=function(s){var i=$.extend({auto:!0,captions:!0,timeout:4e3,nav:!0,nextText:"&rarr;",pause:!0,play:!0,prevText:"&larr;",ratio:"first",stopOnNav:!0},s),t=0;return this.each(function(){function s(){i.auto&&(clearInterval(f),f=setInterval(u,i.timeout),m=!0,h&&h.find("use").attr("xlink:href","#"+g+"-pause-icon"))}function n(){i.auto=!1,clearInterval(f),h&&h.find("use").attr("xlink:href","#"+g+"-play-icon")}function a(){m=!1,clearInterval(f)}function l(){m=!0,s()}function d(){var e=c.filter(".sunslide-active-slide"),s=c.filter(".sunslide-next-slide"),t=e.prev(".sunslide-slide");t.length||(t=$(c[c.length-1])),t.removeClass("sunslide-hidden-slide").addClass("sunslide-active-slide"),e.removeClass("sunslide-active-slide").addClass("sunslide-next-slide"),s.removeClass("sunslide-next-slide").addClass("sunslide-hidden-slide"),i.captions&&v.text(t.find("img").attr("alt"))}function u(){var e=c.filter(".sunslide-active-slide"),s=c.filter(".sunslide-next-slide"),t=s.next(".sunslide-slide");i.auto&&!m||(t.length||(t=$(c[0])),e.removeClass("sunslide-active-slide").addClass("sunslide-hidden-slide"),s.removeClass("sunslide-next-slide").addClass("sunslide-active-slide"),t.removeClass("sunslide-hidden-slide").addClass("sunslide-next-slide"),i.captions&&v.text(s.find("img").attr("alt")))}var r=$(this),o,c,v,f,h,p,x,m,g="sunslide"+t++,C=0,y=0,k=0,w=2,M=0,T;r.wrap('<div class="'+g+' sunslide-wrapper"></div>'),o=r.parent(),o.css({position:"relative"}),c=r.children(),c.length<2||(C=o.width(),i.nav&&(p=$('<a href="#" title="previous slide" class="sunslide-nav previous">'+i.prevText+"</a>"),x=$('<a href="#" title="next slide" class="sunslide-nav next">'+i.nextText+"</a>"),p.on("click",function(e){e.preventDefault(),i.stopOnNav&&(m=!1,n()),s(),d()}),x.on("click",function(e){e.preventDefault(),i.stopOnNav&&(m=!1,n()),s(),u()}),o.append(p),o.append(x)),i.play&&(h=$('<a href="#" title="Toggle automatic slide changes" class="sunslide-nav play"><svg width="1em" height="1em" viewBox="0 0 36 36" fill="#fff"><defs><path id="'+g+'-pause-icon" data-state="playing" d="M11,10L17,10 17,26 11,26M20,10L26,10 26,26 20,26"/><path id="'+g+'-play-icon" data-state="paused" d="M11,10L18,13.74 18,22.28 11,26M18,13.74L26,18 26,18 18,22.28"/></defs><use xlink:href="#'+g+"-"+(i.auto?"pause":"play")+'-icon"/></svg></a>'),h.on("click",function(e){var t=$("use",$(this));e.preventDefault(),i.auto=!i.auto,m=i.auto,i.auto?t.attr("xlink:href","#"+g+"-pause-icon"):(t.attr("xlink:href","#"+g+"-play-icon"),s())}),o.append(h)),c.each(function(){var e=$(this).find("img"),s=e.width(),i=e.height(),t=s/i;s>y&&(y=s),i>k&&(k=i),t>M&&(M=t),w>t&&(w=t)}),T="min"===i.ratio?w:"max"===i.ratio?M:r.find("img:first").width()/r.find("img:first").height(),o.css("height",Math.ceil(y/T)+"px"),$(e).on("resize orientationchange",function(){o.css("height",Math.ceil(o.width()/T)+"px")}),c.addClass("sunslide-slide sunslide-hidden-slide"),$(c[0]).removeClass("sunslide-hidden-slide").addClass("sunslide-active-slide"),$(c[1]).removeClass("sunslide-hidden-slide").addClass("sunslide-next-slide"),i.captions&&(v=$('<div class="sunslide-caption">'+c.filter(".sunslide-active-slide").find("img").attr("alt")+"</div>"),o.append(v)),s(),i.pause&&o.on("mouseenter",a).on("mouseleave",l))})}}(jQuery,this);